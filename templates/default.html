<html lang="de">
<head>
    <meta charset="utf-8">
    <title>{{ _('Invoice') }} - {{ invoice.invoice_id }}</title>
    <meta name="author" content="{{ invoice.company.name }}">
    <meta name="description" content="Rechnung #{{ invoice.invoice_id }}">
    <meta name="generator" content="Generated by {{ invoice.company.name }}">
    <meta name="dcterms.created" content="{{ invoice.created_date }}">
    <meta name="keywords" content="{{ _('Invoice') }}">
    <link href="https://cdn.rehborn.org/fonts/ubuntu.css" type="text/css" rel="stylesheet">
    <style>
        @page {
            size: A4;
            margin: 3cm;
            background: #fff;
            font-family: Ubuntu;

            @bottom-left {
                content: element(bottomLeft);
            }

            @bottom-center {
                content: element(bottomCenter);
            }

            @bottom-right {
                content: element(bottomRight);
            }
        }

        html {
            color: #000;
            font-family: "Ubuntu";
            font-size: 11pt;
            line-height: 1.6;
        }

        body {
            margin: 0;
        }

        h1 {
            color: #{{ invoice.color }};
            font-family: "Ubuntu Bold";
            font-size: 35pt;
            margin: 0;
        }

        h2 {
            margin: 0;
            font-size: 16pt;
            font-family: "Ubuntu Sans Mono";
        }

        aside {
            display: flex;
        }

        aside address {
            font-style: normal;
            white-space: pre-line;
        }

        aside address#from {
            color: #838383;
            flex: 1;
        }

        aside address#to {
            text-align: right;
        }

        dl {
            position: absolute;
            right: 0;
            text-align: right;
            /* top: 28px; */
            top: -15px;
        }

        dt, dd {
            display: inline;
            margin: 0;
        }

        dt {
            color: #a9a;
        }

        dt::before {
            content: '';
            display: block;
        }

        dt::after {
            content: ':';
        }

        table {
            border-collapse: collapse;
            width: 100%;
        }

        th {
            border-bottom: .2mm solid #a9a;
            color: #a9a;
            font-size: 10pt;
            font-weight: 400;
            padding-bottom: .25cm;
            text-transform: uppercase;
        }

        td {
            padding-top: 7mm;
        }

        td:last-of-type {
            color: #{{ invoice.color }};
            font-weight: bold;
            text-align: right;
        }

        th, td {
            text-align: center;
        }

        th:first-of-type, td:first-of-type {
            text-align: left;
        }

        th:last-of-type, td:last-of-type {
            text-align: right;
        }

        section.total {
            content: '';
            display: block;
            height: 6cm;
        }

        table#total {
            background: #f6f6f6;
            border-color: #f6f6f6;
            border-style: solid;
            border-width: 1cm 3cm;
            bottom: 0;
            font-size: 20pt;
            margin: 0cm -3cm;
            position: absolute;
            width: 18cm;
        }

        .template-body {
            font-size: 10pt;
        }

        footer {
            color: #a9a;
            font-size: 8pt;
        }

        footer a {
            text-decoration: none;
            color: #a9a;
        }

        footer.left {
            position: running(bottomLeft);
        }

        footer.center {
            position: running(bottomCenter);
        }

        footer.right {
            position: running(bottomRight);
            color: #{{ invoice.color }};
            font-size: 13pt;
        }

        .draft {
            border-radius: 3px;
            background: #d2042d;
            color: white;
            font-weight: bold;
            padding: 3px 10px;
            position: absolute;
            right: 0;
            top: -1.5cm;
        }

        .qrcode {
            position: absolute;
            right: 0;
            top: 1.5cm;
            width: 80px;
            height: 80px;
        }
        .description {
            white-space: pre-line;
        }
    </style>
</head>

<body>
{% if invoice.draft %}<span class="draft">draft</span>{% endif %}
{{ invoice.company.name }} &middot; {{ invoice.company.description }}
{% if invoice.sepa_qrcode %}
<img src="{{ invoice.sepa_qrcode }}" alt="SEPA QR Code" class="qrcode"/>
{% endif %}

<h1>
    {{ _("Invoice") }}
</h1>
<strong class="invoice_id">
    #{{ invoice.invoice_id }}
</strong>

<aside>
    <address id="from">
        <strong>{{ _('From') }}</strong>
        {{ invoice.company.name }}
        {% if invoice.company.address %}{{ invoice.company.address }}{% endif %}
        {% if invoice.company.email %}{{ invoice.company.email }}{% endif %}
        {% if invoice.company.phone %}{{ invoice.company.phone }}{% endif %}
    </address>

    <address id="to">
        <strong>{{ _('Recipient') }}</strong>
        {{ invoice.customer.name }}
        {% if invoice.customer.address %}{{ invoice.customer.address }}{% endif %}
        {% if invoice.customer.email %}{{ invoice.customer.email }}{% endif %}
        {% if invoice.customer.phone %}{{ invoice.customer.phone }}{% endif %}
    </address>
</aside>

<dl id="informations">
    {#
    <dt>{% trans "invoice number"|title %}</dt>
    #}
    {#
    <dd>{{ invoice.get_invoice_id }}</dd>
    #}
    <dt>{{ _('Date') }}</dt>
    <dd>{{ invoice.created_date }}</dd>

    <dt>{{ _('Due Date') }}</dt>
    <dd>{{ invoice.due_date }}</dd>
</dl>

<p class="template-body">
    {{ invoice.body }}
</p>

<table>
    <thead>
    <tr>
        <th class="description">{{ _('Description') }}</th>
        <th>{{ _('Quantity') }}</th>
        <th>{{ _('Unit') }}</th>
        <th>{{ _('Subtotal') }}</th>
    </tr>
    </thead>
    <tbody>
    {% for position in invoice.positions %}
    <tr>
        <td class="description">{{ position.description }}</td>
        <td>{{ position.quantity }}</td>
        <td>{{ position.rate_formatted }}</td>
        <td>{{ position.amount_formatted }}</td>
        {{swu}}
    </tr>
    {% endfor %}
    </tbody>
</table>

<section class="total">
    <table id="total">
        <thead>
        <tr>
            <th>{{ _('Subtotal') }}</th>
            <th>{{ invoice.tax }}% {{ _('Tax') }}</th>
            <th>{{ _('Total') }}</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>{{ invoice.subtotal_formatted }}</td>
            <td>{{ invoice.taxed_formatted }}</td>
            <td>{{ invoice.total_with_tax_formatted }}</td>
        </tr>

        </tbody>
    </table>
</section>

<footer class="left">
    <a href="mailto:{{ invoice.company.email }}">{{ invoice.company.email }}</a><br/>
    <a href="{{ invoice.company.web }}">{{ invoice.company.web }}</a>
</footer>
<footer class="center">
    {% if invoice.company.bank and invoice.company.iban %}
    {{ invoice.company.bank }} &middot; IBAN: {{ invoice.company.iban }}<br />
    {% endif %}
    {{ _('Tax-ID') }}: {{ invoice.company.tax_id }}
    {{ invoice.footer }}
</footer>
<footer class="right">
    â™¥ {{ _('Thank You') }}!
</footer>
</body>
</html>